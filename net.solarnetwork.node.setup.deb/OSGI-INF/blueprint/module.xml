<?xml version="1.0" encoding="UTF-8"?>
<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:osgi="http://www.eclipse.org/gemini/blueprint/schema/blueprint"
	xsi:schemaLocation="
		http://www.osgi.org/xmlns/blueprint/v1.0.0
		http://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd">

	<!-- Service references -->

	<bean id="taskExecutor" class="net.solarnetwork.util.DynamicServiceTracker">
		<property name="bundleContext" ref="bundleContext"/>
		<property name="serviceClassName" value="org.springframework.core.task.AsyncTaskExecutor"/>
		<property name="serviceFilter" value="(function=node)"/>
	</bean>	
		
	<!-- Published Services -->
	
	<service interface="net.solarnetwork.node.PlatformPackageService">
		<bean class="net.solarnetwork.node.setup.deb.DebianPlatformPackageService">
			<property name="taskExecutor" ref="taskExecutor"/>
		</bean>
	</service>

</blueprint>
